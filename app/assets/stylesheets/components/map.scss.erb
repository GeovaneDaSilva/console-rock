@import "_vars/colors";

body:fullscreen #threat-map {
  .fullscreen {
    display: none;
  }
}

#threat-map {
  position: relative;
  margin: 0 auto;
  overflow: hidden;
  background: $primaryGrey;
  background-image: url('<%= asset_path "map-background.jpg" %>');
  background-size: cover;

  .title {
    background: rgba(0,0,0,0.8);
    color: #fff;
    position: absolute;
    display: inline-block;
    padding: 5px 10px;
    font-size: 24px;
    top: 10px;
    left: 10px;
    z-index: 3;
  }

  .fullscreen {
    background: rgba(0,0,0,0.8);
    color: #fff;
    position: absolute;
    display: inline-block;
    padding: 2px 10px;
    font-size: 24px;
    bottom: 10px;
    left: 10px;
    z-index: 3;
    cursor: pointer;
  }

  #threat-map-feed {
    background: rgba(0,0,0,0.8);
    color: #fff;
    position: absolute;
    display: inline-block;
    right: 10px;
    top: 10px;
    height: calc(100vh - 20px);
    width: 300px;
    overflow-y: scroll;

    .threat-summary {
      padding: 10px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      img { width: 16px; }
      background-color: transparent;
      transition: background-color 2000ms;

      a:hover {
        color: lighten($rcGreen, 15%);
      }

      .half {
        width: 50%;
        overflow: hidden;
      }

      &.flash {
        background-color: rgba(255,255,255, 0.3);
      }
    }
  }

  &.customer {
    .customer-name { display: none; }
  }

  .jvectormap-container {
    position: absolute;
    z-index: 2;
    top: 0;
    width: calc(100vw - 320px) !important;
  }

  .jvectormap-zoomin, .jvectormap-zoomout {
    display:none;
  }

  .jvectormap-container {
    background-color: transparent !important;
  }

  .jvectormap-region {
    fill: $rcGreen;
    stroke: transparent;
    stroke-width: 1px;
    opacity: 0.9;

    &:hover {
      fill: $primaryGrey;
      stroke: #333333;
      opacity: 1 !important;
    }
  }

  g {
    transition: opacity 1s linear;
    &.fade-out {
      opacity:0;
    }
  }

  path {
    &.attack-path {
      stroke-width:2;
      fill:transparent;
    }

    &.animated-path {
      animation: dash 0s linear forwards;
    }

  }
}

.jvectormap-label {
  z-index: 3;
  border: solid 1px lighten(#333333, 30%);
  background-color: #333333;
}

@keyframes dash {
  to {
    stroke-dashoffset: 0;
  }
}
